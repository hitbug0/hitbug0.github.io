<!DOCTYPE html>
<html lang="ja">
  <head prefix="og: https://ogp.me/ns#">
    <meta property="og:type" content="article" />
    <meta property="og:site_name" content="hitbug" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@hitbug0" />

    <meta property="og:url" content="https://hitbug0.github.io/posts/2024-04-26-threejs.html" />
    <meta property="og:title" content="【three.js】Webページに3Dモデルを表示する方法" />
    <meta property="og:image" content="https://avatars.githubusercontent.com/u/166343381?v=4?s=400" />
    <meta property="og:description" content="Webページに3Dモデルをサクッと表示する方法を、実際のコードを含めて紹介します。
        three.jsを使いますが、全機能使いこなさなくてもいいしまず試してみたい！　という方が対象です。" />
    
    <title>【three.js】Webページに3Dモデルを表示する方法 | hitbug</title>
    <meta name="tag" content="3D">
    <meta name="tag" content="three.js">
    <meta name="tag" content="JavaScript">
    <meta name="tag" content="Web%E5%88%B6%E4%BD%9C">
    <meta name="description" content="Webページに3Dモデルをサクッと表示する方法を、実際のコードを含めて紹介します。
        three.jsを使いますが、全機能使いこなさなくてもいいしまず試してみたい！　という方が対象です。" />

    <!-- 共通: 基本設定-->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../includes/style.css" />
    <link rel="icon" href="../contents/icon/icon_black_tr.png" />

    <!-- 共通: フォントの設定-->
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="anonymous" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP&display=swap" crossorigin="anonymous" />

    <!-- 共通: lightbox (ウェブサイト上で画像や動画を拡大表示するためのポップアップウィンドウ) の設定-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.7.1/css/lightbox.css" crossorigin="anonymous" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.7.1/js/lightbox.min.js" crossorigin="anonymous"></script>

    <!-- 共通: Google AdSenseの設定-->
    <meta name="google-adsense-account" content="ca-pub-5830432592137126" />
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5830432592137126"
        crossorigin="anonymous">
    </script>

    <!-- 共通: Google Analyticsの設定-->
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-2NP6QCR05Z"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-2NP6QCR05Z');
    </script>

    <!-- 共通: コード表示とコピーの設定-->
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.8/clipboard.min.js"></script>
  </head>
  <body>
    <!-- 共通: ヘッダ -->
    <header></header>
    <script>$(function(){$('header').load('../includes/header.html');});</script>

    <div id="wrapper">
        <div id="main">
            <!-- コンテンツ -->
            <div id="hidden-left-sidebar"></div>
            <div id="left-sidebar">
                <div id="left-share">
                    <h1 class="text">Share!</h1>
                    <a href="https://twitter.com/intent/tweet?url=https://hitbug0.github.io/posts/2024-04-26-threejs.html&text=" class="twitter-share-button" data-show-count="false" rel="noopener noreferrer" target="_blank">
                        <img  class="twitter-share-button-img" src="../contents/icon/x.png" alt="logo of x">
                    </a>
                </div>
                <br>
                <div class="text">
                    <h1>In this article</h1>
                    <ul>
                        <li><a href="#section1">この記事でわかること</a></li>
                        <li><a href="#section2">方法</a></li>
                        <li><a href="#section3">サンプルコードの概要</a></li>
                        <li><a href="#section4">まとめ</a></li>
                    </ul>
                </div>
                <br>
                <div id="left-sidebar-tags" class="text"></div>
                <script>$(function(){$('#left-sidebar-tags').load('../includes/tags-post.html');});</script>
            </div>
            <div id="center">
                <div class="text">


                    
<script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<h1 id="threejsweb%E3%83%9A%E3%83%BC%E3%82%B8%E3%81%AB3d%E3%83%A2%E3%83%87%E3%83%AB%E3%82%92%E8%A1%A8%E7%A4%BA%E3%81%99%E3%82%8B%E6%96%B9%E6%B3%95">【three.js】Webページに3Dモデルを表示する方法</h1>
<p></p>
<hr/>
<p>Webページに3Dモデルをサクッと表示する方法を、実際のコードを含めて紹介します。<br/>
<a href="https://threejs.org/" rel="noopener noreferrer" target="_blank">three.js</a>を使いますが、全機能使いこなさなくてもいいしまず試してみたい！　という方が対象です。</p>
<h2 id="section1">この記事でわかること</h2>
<ul>
<li>three.jsを(部分的に)使ってhtmlに3Dモデル(stlファイル)を表示したりぐりぐり回したりできるようにする方法</li>
<li>3Dモデルの色やデフォルトの表示角度などを変える方法</li>
<li>つまり、以下を実現する方法</li>
</ul>
<p><div class="model-container" id="chain-0"></div></p>
<h2 id="section2">方法</h2>
<p>まず、表示できることを確認する手順は以下です。</p>
<ol>
<li><a href="https://github.com/hitbug0/example-of-threejs" rel="noopener noreferrer" target="_blank">GitHubにアップしているサンプルコード</a>をダウンロードする</li>
<li><code>run.bat</code>を実行する</li>
</ol>
<p><code>run.bat</code>はローカルサーバーを立てて、そのページをChromeで開くコードです。<br/>
警告が出るかもですが、決して怪しいファイルではないので大丈夫です！</p>
<div class="container"><div id="code-content0"><button class="copy-button" data-clipboard-target="#code-content0">Copy</button><pre class="hljs"><code><div><span class="hljs-built_in">set</span> port=<span class="hljs-number">8080</span>
<span class="hljs-built_in">start</span> <span class="hljs-built_in">cmd</span> /c "python -m http.server <span class="hljs-variable">%port%</span>"
powershell -command "&amp; {<span class="hljs-built_in">Start</span>-Sleep -Seconds <span class="hljs-number">0</span>.<span class="hljs-number">2</span>}"
<span class="hljs-built_in">start</span> chrome.exe http://localhost:<span class="hljs-variable">%port%</span>/
</div></code></pre></div></div>
<p>うまく動いたら、コードの中身を見ていろいろ編集してみてください。<br/>
以上です！</p>
<h2 id="section3">サンプルコードの概要</h2>
<p>一応少しだけ説明を書いておこうとおもいます。</p>
<h3 id="%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E6%A7%8B%E6%88%90">ファイル構成</h3>
<ul>
<li>
<p><strong>includes</strong></p>
<ul>
<li><strong>three.js</strong> : 3Dモデル表示のスクリプトが入っている。<a href="https://threejs.org/" rel="noopener noreferrer" target="_blank">公式ページはこちら</a></li>
<li><code>display-3dmodel.js</code> : three.jsの中身を呼び出すスクリプト</li>
<li><code>style.css</code> : スタイルファイル</li>
</ul>
</li>
<li>
<p><strong>stl</strong> : 3D形状ファイルを入れる（デフォルトではサンプルデータが入っている）</p>
</li>
<li>
<p><code>index.html</code> : 例のHTMLファイル</p>
</li>
<li>
<p><code>README.md</code> : このファイル</p>
</li>
<li>
<p><code>run.bat</code> : ローカルでindex.htmlを開くためのファイル</p>
</li>
</ul>
<h3 id="indexhtml">index.html</h3>
<p>&lt;body&gt;の後ろの&lt;script&gt;における<code>OBJ_INFO</code>で、3D形状ファイルについての設定をしています。<br/>
設定内容は下記のコード内でコメントとして書いてある通りです。<br/>
色のバリエーションについては、<code>display-3dmodel.js</code>の<code>name2colorValue</code>関数で指定している以下の色が使えます。<br/>
追加したい場合はそこに書き加えるか、あるいはもっと便利に改良しちゃってください！</p>
<ul>
<li>赤</li>
<li>ピンク</li>
<li>オレンジ</li>
<li>黄</li>
<li>緑</li>
<li>青</li>
<li>白</li>
<li>灰</li>
<li>黒</li>
</ul>
<p>また、表示先は<code>&lt;div class="model-container" id="chain-1"&gt;</code>のような形式で指定できます。</p>
<div class="container"><div id="code-content1"><button class="copy-button" data-clipboard-target="#code-content1">Copy</button><pre class="hljs"><code><div><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"utf-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"../includes/style.css"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>display 3D model | hitbug<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"wrapper"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>3Dモデルの表示<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"model-container"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"chain-1"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"model-container"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"milk_crown-2"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="actionscript">
        <span class="hljs-keyword">const</span> OBJ_INFO=[
            [
                <span class="hljs-string">'../stl/chain.stl'</span>,    <span class="hljs-comment">/*  形状ファイルのパス          */</span>
                [<span class="hljs-string">'chain-1'</span>],           <span class="hljs-comment">/*  表示先divのid              */</span>
                [[<span class="hljs-number">0</span>,<span class="hljs-number">-300</span>,<span class="hljs-number">150</span>]],        <span class="hljs-comment">/*  視点の位置座標[x,y,z]       */</span>
                [[<span class="hljs-string">'orange'</span>, <span class="hljs-string">'white'</span>]], <span class="hljs-comment">/*  形状と背景の色              */</span>
                [<span class="hljs-number">1</span>, <span class="hljs-number">10000</span>]             <span class="hljs-comment">/*  ズームイン/アウトの限界距離  */</span>
            ],
            [
                <span class="hljs-string">'../stl/milk_crown.stl'</span>,
                [<span class="hljs-string">'milk_crown-2'</span>],
                [[<span class="hljs-number">100</span>,<span class="hljs-number">-300</span>,<span class="hljs-number">150</span>]],
                [[<span class="hljs-string">'rainbow'</span>, <span class="hljs-string">'white'</span>]],
                [<span class="hljs-number">1</span>, <span class="hljs-number">10000</span>]
            ],
        ];
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"../includes/display-3dmodel.js"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"module"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</div></code></pre></div></div>
<h3 id="stylecss%E3%81%AE%E4%B8%AD%E3%81%A7%E6%9C%AC%E5%BD%93%E3%81%AB%E5%BF%85%E8%A6%81%E3%81%AA%E9%83%A8%E5%88%86">style.cssの中で本当に必要な部分</h3>
<p><a href="https://github.com/hitbug0/example-of-threejs" rel="noopener noreferrer" target="_blank">GitHub</a>に上げている<code>style.css</code>では、少し表示を整えるためのコードが入っているのですが、最小限にすると以下のようになります。</p>
<div class="container"><div id="code-content2"><button class="copy-button" data-clipboard-target="#code-content2">Copy</button><pre class="hljs"><code><div><span class="hljs-selector-class">.model-container</span> {
    <span class="hljs-attribute">justify-content</span>: center;
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f8f8f8</span>;
    <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#cccccc</span>;
    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">5px</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">600px</span>;
    <span class="hljs-attribute">width</span>: <span class="hljs-number">1000px</span>;
    <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">20px</span>;
    <span class="hljs-attribute">max-width</span>: <span class="hljs-number">100%</span>;
    <span class="hljs-attribute">overflow</span>: hidden;
    <span class="hljs-attribute">position</span>: relative;
}
</div></code></pre></div></div>
<h2 id="section4">まとめ</h2>
<p>Webページに3Dモデルをサクッと表示する方法を、実際のコードを含めて紹介しました。<br/>
まず試してみるのにはよいかと思います。<br/>
お役に立てばうれしいです！</p>
<script>
                       const OBJ_INFO=[
                           [
                               '../contents/stl/chain.stl',
                               ['chain-0'],
                               [[0,-300,150]],
                               [['orange', 'white']],
                               [1, 1000]
                           ],
                       ];
                    </script>
<script async="" src="https://unpkg.com/es-module-shims@1.3.6/dist/es-module-shims.js"></script>
<script src="../includes/display-3dmodel.js" type="module"></script>



                </div>
                <!-- 広告の部分は表示されるようになってから調整する -->
            </div>
            <div id="right-sidebar">
                <!-- 広告の部分は表示されるようになってから調整する -->
            </div>
            <div id="hidden-right-sidebar"></div>
        </div>
        <!-- 共通: ハンバーガーメニュー -->
        <div id="hamburger-menu"></div>
        <script>$(function(){$('#hamburger-menu').load('../includes/hamburger-menu.html');});</script>
        <!-- 共通: フッタ -->
        <footer></footer>
        <script>$(function(){$('footer').load('../includes/footer.html');});</script>
    </div>
    <div class="floating-button">
        <a href="https://twitter.com/intent/tweet?url=https://hitbug0.github.io/posts/2024-04-26-threejs.html&text=" class="twitter-share-button" data-show-count="false" rel="noopener noreferrer" target="_blank">
            <img class="twitter-share-button-img" src="../contents/icon/x.png" alt="logo of x">
        </a>
    </div>
  </body>
  <script src="https://code.jquery.com/jquery-3.4.1.min.js" crossorigin="anonymous"
      integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=">
  </script>
  <script src="../includes/clipboard-script.js"></script>
</html>